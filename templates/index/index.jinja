<!DOCTYPE html>
<html lang="en">

<head>
    <title>Exchange rates for Beatos</title>
    <script src="https://unpkg.com/htmx.org@1.8.0"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}" id="theme-stylesheet">
</head>

<body>
    <div class="container">

        <div class="row mt-3">
            <h1>Exchange rates for Beatos</h1>

            <div>
                Get FX rates for selected currencies. Some from <a
                    href="https://sdw-wsrest.ecb.europa.eu/help/">ECB</a>,
                some (missing on ECB) from Apilayer exchange rates <a
                    href="https://apilayer.com/marketplace/exchangerates_data-api"> API</a>.
            </div>
        </div>

        {# progress bar - polling, coz Im lazy #}
        <div class="mt-3 mb-3">
            Apilayer monthly quota
            <div hx-get="{{ url_for('hx_quota_progressbar') }}" hx-trigger="load,every 5s"></div>
        </div>

        <div class="row">
            <form hx-post="{{ url_for('fetch_data_form') }}" hx-indicator=".htmx-indicator" hx-swap="beforeend">

                {# checkboxes #}
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" name="ecb" id="ecb"
                        {% if checkboxes["ecb"] %}checked{% endif %}>
                    <label class="form-check-label" for="ecb"> ECB </label>
                </div>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" name="apilayer" id="apilayer"
                        {% if checkboxes["apilayer"] %}checked{% endif %}>
                    <label class="form-check-label" for="apilayer"> Apilayer </label>
                </div>

                {# date pickers #}
                <div class="row">
                    <div class="col mt-3">
                        <label class="form-label">date from</label>
                        <select name="date_from" id="date_from" class="form-control">
                            {% for opt in options[2:] %}
                            <option value="{{ opt }}">{{ opt }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col mt-3">
                        <label class="form-label">date to</label>
                        <select name="date_to" id="date_to" class="form-control">
                            {% for opt in options[:-2] %}
                            <option value="{{ opt }}">{{ opt }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                {# button #}
                <div class="mt-3">
                    <input type="submit" value="Submit" class="btn btn-primary">
                </div>
            </form>
        </div>

        {# indicator of work in progress #}
        <div class="mt-3">
            <span class="htmx-indicator">
                <div class="spinner-border spinner-border-sm" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                Working on it ...
            </span>
        </div>

    </div>
</body>

</html>
